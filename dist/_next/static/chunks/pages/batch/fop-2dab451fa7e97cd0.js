(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[142],{95668:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/batch/fop",function(){return a(12969)}])},84453:function(e,t,a){"use strict";a.d(t,{Uy:function(){return i},cC:function(){return n},rE:function(){return c}});var s=a(41799),l=a(85893),r=a(90890),n=function(e){var t=(0,r.$G)("common").t;return(0,l.jsxs)("div",{className:"form-control w-full",children:[(0,l.jsxs)("label",{className:"label text-neutral",children:[(0,l.jsx)("span",{className:"label-text text-neutral",children:e.title}),(0,l.jsx)("span",{className:"label-text-alt text-error",children:e.errorMessage})]}),(0,l.jsx)("input",(0,s.Z)({type:"number",placeholder:"1",className:"input input-bordered w-full text-neutral",disabled:e.disabled},e.register)),(0,l.jsxs)("label",{className:"label",children:[(0,l.jsx)("span",{className:"label-text-alt text-neutral",children:e.description}),(0,l.jsxs)("span",{className:"label-text-alt text-neutral",children:["".concat(Number(e.value).toLocaleString("en-US")),(0,l.jsx)("button",{type:"button",onClick:function(){return e.setValue(e.register.name,e.value)},className:"btn btn-xs glass text-neutral ml-2",disabled:e.disabled,children:t("form-field.max")})]})]})]})},i=function(e){var t=(0,r.$G)("common").t;return(0,l.jsxs)("div",{className:"form-control w-full",children:[(0,l.jsxs)("label",{className:"label text-neutral",children:[(0,l.jsx)("span",{className:"label-text text-neutral",children:t("form-field.wallet-address")}),(0,l.jsx)("span",{className:"label-text-alt text-error",children:e.errorMessage})]}),(0,l.jsx)("input",(0,s.Z)({type:"text",placeholder:"0x",className:"input input-bordered w-full text-neutral",disabled:e.disabled},e.register)),(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text-alt text-neutral",children:t("form-field.wallet-address-description")})})]})},c=function(e){var t=(0,r.$G)("common").t;return(0,l.jsxs)("div",{className:"form-control w-full",children:[(0,l.jsxs)("label",{className:"label text-neutral",children:[(0,l.jsx)("span",{className:"label-text text-neutral",children:e.title}),(0,l.jsx)("span",{className:"label-text-alt text-error",children:e.errorMessage})]}),(0,l.jsx)("input",(0,s.Z)({type:"number",placeholder:"1",className:"input input-bordered w-full text-neutral",disabled:e.disabled},e.register)),(0,l.jsxs)("label",{className:"label",children:[(0,l.jsx)("span",{className:"label-text-alt text-neutral",children:e.description}),(0,l.jsxs)("span",{className:"label-text-alt text-neutral",children:["".concat(Number(e.value).toLocaleString("en-US")),(0,l.jsx)("button",{type:"button",onClick:function(){return e.setValue(e.register.name,e.value)},className:"btn btn-xs glass text-neutral ml-2",disabled:e.disabled,children:t("form-field.max")})]})]})]})}},83845:function(e,t,a){"use strict";var s=a(85893),l=a(97384),r=a(2593),n=a(90890),i=function(e){var t,a,i=e.feeData,c=e.gasLimit,d=(0,n.$G)("common").t;return(0,s.jsx)("table",{className:"w-full",children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{className:"label-text-alt text-neutral",children:[(0,s.jsx)("td",{children:d("gas.gas").toUpperCase()}),(0,s.jsx)("td",{className:"text-right",children:(0,l.og)(Number((0,l.aY)(null!==(t=null==i?void 0:i.gasPrice)&&void 0!==t?t:r.O$.from(0))),0,"gwei")})]}),(0,s.jsxs)("tr",{className:"label-text-alt text-neutral",children:[(0,s.jsx)("td",{children:d("gas.transaction").toUpperCase()}),(0,s.jsx)("td",{className:"text-right",children:(0,l.og)(Number(null!=c?c:0),0,"gwei")})]}),(0,s.jsxs)("tr",{className:"label-text-alt text-neutral",children:[(0,s.jsx)("td",{children:d("gas.total").toUpperCase()}),(0,s.jsx)("td",{className:"text-right",children:(0,l.og)(Number((0,l.aY)(null!==(a=null==i?void 0:i.gasPrice.mul(null!=c?c:0))&&void 0!==a?a:r.O$.from(0))),0,"gwei")})]})]})})};t.Z=i},31e3:function(e,t,a){"use strict";var s=a(41799),l=a(99534),r=a(85893),n=a(86010),i=function(e){var t=e.className,a=(0,l.Z)(e,["className"]);return(0,r.jsx)("div",{className:(0,n.clsx)("card glass card-compact lg:card-normal",t),children:(0,r.jsx)("div",(0,s.Z)({className:"card-body text-neutral"},a))})};t.Z=i},9662:function(e,t,a){"use strict";var s=a(41799),l=a(99534),r=a(85893),n=a(86010),i=function(e){var t=e.className,a=(0,l.Z)(e,["className"]);return(0,r.jsx)("div",(0,s.Z)({className:(0,n.clsx)("mx-auto py-4 px-4 sm:px-6 lg:px-8 text-neutral",t)},a))};t.Z=i},12969:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return G},default:function(){return T}});var s=a(41799),l=a(69396),r=a(51351),n=a(85893),i=a(67976),c=a(9662),d=a(11163),o=a(67294),u=a(90890),m=a(7423),x=a(97384),h=a(31e3),b=a(41664),f=a.n(b),j=a(84453),p=a(38264),v=a(13378),N=a(87536),g=a(32866),y=a(47533),w=a(86010),k=a(74231),Z=a(86501),M=a(83845),S=a(2593),D=a(81758),C=a(91171),q=a(69416),O=void 0,_=function(e){var t,a,r,c,d=e.tokenData,h=e.tokenId,b=(e.owner,e.version),f=(0,u.$G)("common").t,j=(0,i.mA)().address,p=(0,o.useContext)(m.Z).globalRank,v=new Date().getTime()/1e3,N=D.fO,g=D.xv;"v1"==b&&(N=D.Dg,g=D.Hp);var y=(0,i.PJ)({addressOrName:g,contractInterface:N,functionName:"claimMintReward",args:[h],overrides:{from:j,gasLimit:3e7}}),w=y.config;y.error;var k=(0,i.GG)((0,l.Z)((0,s.Z)({},w),{onSuccess:function(e){}})),Z=(k.data,k.isError,k.isLoading,k.write),M=function(e,t,a,s){null==Z||Z()},S=function(e,t,a,s){var l="https://musse.io/#/detail/";"v1"==a?l+="0xa5e5e2506392b8467a4f75b6308a79c181ab9fbf:":"v2"==a&&(l+="0x3a02488875719258475d44601685172c213510b4:");var r=window.open("about:blank");r&&(r.location.href=l+t)};return(0,o.useEffect)(function(){},[]),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:null===(t=d[1].cRank)||void 0===t?void 0:t.toString()}),(0,n.jsx)("td",{children:null===(a=d[1].term)||void 0===a?void 0:a.toString()}),(0,n.jsx)("td",{children:((null===(r=d[1].pMinters)||void 0===r?void 0:r.length)*(0,x.wr)(p,{amplifier:d[1].amp,term:d[1].term,rank:d[1].cRank})).toFixed(0)}),(0,n.jsx)("td",{children:null===(c=d[1].pMinters)||void 0===c?void 0:c.length}),(0,n.jsx)("td",{children:(0,x.p6)(d[1].maturityTs)}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{type:"button",onClick:M.bind(O,d[1],h,b),disabled:v<d[1].maturityTs,className:"btn btn-xs glass text-neutral ml-2",children:f("batch.fop.action-claim")}),(0,n.jsx)("br",{}),(0,n.jsx)("button",{type:"button",onClick:S.bind(O,d[1],h,b),disabled:v>d[1].maturityTs,className:"btn btn-xs glass text-neutral ml-2",children:f("batch.fop.action-view")})]})]})},E=function(e){var t=e.tokenId,a=e.owner,r=e.version,c=q.fU[0],d=(0,i.do)((0,l.Z)((0,s.Z)({},(0,C.h0)(c)),{functionName:"ownerOfWithPack",overrides:{from:a},args:[t]})).data;return d&&d[0]&&d[1].minter==a?(0,n.jsx)(_,{tokenId:t,owner:a,version:r,tokenData:d}):(0,n.jsx)(n.Fragment,{})},G=!0,T=function(){console.log("fop更新",new Date().getTime()/1e3);var e,t,a,b=(0,u.$G)("common").t,q=(0,i.mA)().address,O=(0,i.LN)().chain,_=(0,d.useRouter)(),G=(0,o.useState)(!0),T=G[0],$=G[1],L=(0,o.useState)(100),R=L[0],U=L[1],I=(0,o.useState)(!1),P=I[0],V=I[1],Q=(0,o.useState)(x.Dr),B=Q[0],X=Q[1],F=(0,o.useContext)(m.Z),A=F.userMint,J=F.currentMaxTerm,W=F.globalRank,Y=F.feeData,H=F.mintValue,z=(F.v2Balance,F.fopV2List),K=(0,o.useState)(50),ee=K[0],et=K[1],ea=k.Ry().shape({startMintDays:k.Rx().required(b("form-field.days-required")).max(R,b("form-field.days-maximum",{numberOfDays:R})).positive(b("form-field.days-positive")).typeError(b("form-field.days-required")),startMintQuantitys:k.Rx().required(b("batch.quantity-required")).max(ee,b("batch.quantity-desc",{quantityOfFopMint:ee})).positive(b("batch.quantity-positive")).typeError(b("batch.quantity-required"))}).required(),es=(0,N.cI)({mode:"onChange",resolver:(0,y.X)(ea)}),el=es.register,er=es.handleSubmit,en=es.watch,ei=es.formState,ec=ei.errors,ed=ei.isValid,eo=es.setValue,eu=en(),em=S.O$.from(H+"");eu.startMintQuantitys&&(em=S.O$.from(eu.startMintQuantitys+"").mul(S.O$.from(H+"")));var ex=(0,i.PJ)({addressOrName:(0,C.IW)(O).addressOrName,contractInterface:D.fO,functionName:"claimRank",args:["0x0000000000000000000000000000000000000000",null!==(t=eu.startMintQuantitys)&&void 0!==t?t:0,null!==(a=eu.startMintDays)&&void 0!==a?a:0],enabled:!T,overrides:{value:em,gasLimit:3e7}}),eh=ex.config;ex.error;var eb=(0,i.GG)((0,l.Z)((0,s.Z)({},eh),{onSuccess:function(e){V(!0),$(!0)}})),ef=eb.data,ej=eb.write,ep=(0,i.BX)({hash:null==ef?void 0:ef.hash,onSuccess:function(e){(0,Z.ZP)(b("toast.claim-successful")),_.push("/batch/fop")}}),ep=null!==ep?ep:(0,r.Z)(TypeError("Cannot destructure undefined")),ev=function(){null==ej||ej()},eN=function(e){console.log("form error:",e)};return(0,o.useEffect)(function(){eu.startMintDays&&X(x.Dr+86400*eu.startMintDays),$(!1),U(Number(null!=J?J:864e4)/86400),et(50)},[q,eh,J,ed,P,A,eu,50,]),(0,n.jsx)(c.Z,{className:"max-w-2xl",children:(0,n.jsxs)("div",{className:"flew flex-row space-y-8 ",children:[(0,n.jsxs)("ul",{className:"steps w-full",children:[(0,n.jsx)(f(),{href:"/batch/fop",children:(0,n.jsx)("a",{className:"step step-neutral",children:b("batch.fop.title")})}),(0,n.jsx)(f(),{href:"/batch/saving",children:(0,n.jsx)("a",{className:"step",children:b("batch.gas.title")})})]}),(0,n.jsx)(h.Z,{children:(0,n.jsx)("form",{onSubmit:er(ev,eN),children:(0,n.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,n.jsx)("h2",{className:"card-title text-neutral",children:b("mint.claim-rank")}),(0,n.jsx)(j.cC,{title:b("form-field.days").toUpperCase(),description:b("form-field.days-description"),decimals:0,value:R,disabled:T,errorMessage:(0,n.jsx)(g.B,{errors:ec,name:"startMintDays"}),register:el("startMintDays"),setValue:eo}),(0,n.jsx)(j.rE,{title:b("batch.quantity").toUpperCase(),description:b("batch.quantity-desc"),decimals:0,value:ee,disabled:T,errorMessage:(0,n.jsx)(g.B,{errors:ec,name:"startMintQuantitys"}),register:el("startMintQuantitys"),setValue:eo}),(0,n.jsxs)("div",{className:"flex stats glass w-full text-neutral",children:[(0,n.jsx)(v.tZ,{title:b("card.claim-rank"),value:W,decimals:0}),(0,n.jsx)(v.TU,{title:b("card.maturity"),dateTs:B,isPast:!1})]}),(0,n.jsx)("div",{className:"alert shadow-lg glass",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:(0,n.jsx)(p.Z,{className:"w-8 h-8"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold",children:b("mint.terms")}),(0,n.jsx)("div",{className:"text-xs",children:b("mint.terms-details",{numberOfDays:R})})]})]})}),(0,n.jsx)("div",{className:"form-control w-full",children:(0,n.jsx)("button",{type:"submit",className:(0,w.clsx)("btn glass text-neutral",{loading:P}),disabled:T,children:b("mint.start")})}),(0,n.jsx)(M.Z,{feeData:Y,gasLimit:null==eh?void 0:null===(e=eh.request)||void 0===e?void 0:e.gasLimit})]})})}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)("h2",{className:"card-title",children:b("batch.record")}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"table w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"hidden lg:table-cell",children:b("batch.tb.rank")}),(0,n.jsx)("th",{className:"hidden lg:table-cell",children:b("batch.tb.term")}),(0,n.jsx)("th",{className:"hidden lg:table-cell",children:b("batch.tb.estimate")}),(0,n.jsx)("th",{className:"hidden lg:table-cell",children:b("batch.tb.quantity")}),(0,n.jsx)("th",{className:"hidden lg:table-cell",children:b("batch.tb.exptime")}),(0,n.jsx)("th",{className:"hidden lg:table-cell text-right",children:b("batch.tb.action")})]})}),(0,n.jsx)("tbody",{children:null==z?void 0:z.map(function(e,t){return(0,n.jsx)(E,{tokenId:e.tokenId,owner:e.minter,version:e.version},t)})})]})})]})]})})}}},function(e){e.O(0,[285,104,774,888,179],function(){return e(e.s=95668)}),_N_E=e.O()}]);